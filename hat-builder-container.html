<!-- START of HTML -->

<!-- Get Started Button -->
<div class="button-container" id="button-container">
  <button class="get-started" id="scrollButton">
    <img src="https://cdn.shopify.com/s/files/1/0569/9295/6486/files/644F30CC-D4E1-496F-9FFA-48C7B530774B.png?v=1696287782" alt="Button Image" class="button-image">
    <id="scrollButton">
    <p class="button-text" id="scrollButton">Get Started</p>
  </button>
</div>

<!-- ENTIRE Hat Builder Container -->
<div class="hat-builder-container">

  <!-- Hat Preview Header -->
  <div class="hat-builder-header">
    <div class="hat-builder-left-heading">Hat Builder</div>
    <div class="hat-builder-right-heading">
      <span class="hat-builder-collection-icon">
        <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.5 7.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" fill="#332E21"/><path fill-rule="evenodd" d="M7.517 4.098a3.75 3.75 0 0 1 2.652-1.098h2.081a2.75 2.75 0 0 1 2.75 2.75v2.289a3.25 3.25 0 0 1-.952 2.298l-4.206 4.206a2.5 2.5 0 0 1-3.536 0l-2.672-2.672a2.75 2.75 0 0 1 0-3.89l3.883-3.883Zm2.652.402a2.25 2.25 0 0 0-1.591.659l-3.883 3.883a1.25 1.25 0 0 0 0 1.768l2.672 2.672a1 1 0 0 0 1.414 0l4.206-4.206a1.75 1.75 0 0 0 .513-1.237v-2.289c0-.69-.56-1.25-1.25-1.25h-2.081Z" fill="#332E21"/><path d="M16.75 5.5a.75.75 0 0 1 .75.75v3.029a3.25 3.25 0 0 1-.968 2.313l-4.755 4.692a.75.75 0 1 1-1.054-1.068l4.756-4.692a1.75 1.75 0 0 0 .521-1.245v-3.029a.75.75 0 0 1 .75-.75Z" fill="#332E21"/></svg>
      </span>
      <span class="hat-builder-collection-label">All Patches</span>
    </div>
  </div>

  <!-- Hat Builder Carousel -->
  <div class="hat-builder-carousel-container">

    <!-- Patch carousel container -->
    <div class="patch-carousel-container">
    
      <!-- Patch image carousel -->
      <div class="default-patch-carousel">
        {% for product in collections['patches'].products %}
          <div><img src="{{ product.images.first | img_url: 'medium' }}" alt="{{ product.title }}" /></div>
        {% endfor %}
      </div>
      
      <!-- Highlight border -->
      <div class="highlight-box" id="patchHighlight"></div>

    </div>

    <!-- Hat carousel container -->
    <div class="hat-carousel-container">

      <!-- Hat image carousel -->
      <div class="default-hat-carousel">
        {% for product in collections['hats'].products %}
          <div><img src="{{ product.images.first | img_url: 'medium' }}" alt="{{ product.title }}" /></div>
        {% endfor %}
      </div>

      <!-- Highlight border -->
      <div class="highlight-box" id="hatHighlight"></div> 
    
    </div>

  </div>

  <!-- Play/pause icon -->
  <div id="playPauseIcon" data-state="playing">
    <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 7.25a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z" fill="#332E21"/><path d="M12.75 8a.75.75 0 0 0-1.5 0v4a.75.75 0 0 0 1.5 0v-4Z" fill="#332E21"/><path fill-rule="evenodd" d="M10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z" fill="#332E21"/></svg>
  </div>

</div>
  
<!-- Tabs to switch between patches and hats -->
<div class="toggle-section">

  <div class="toggle-container">

    <!-- Tabs -->
    <div class="toggle-button active" id="patchesToggle">Patches</div>
    <div class="toggle-button" id="hatsToggle">Hats</div>
    
    <!-- Active state background -->
    <div class="active-background"> </div>

  </div>

</div>
<!-- END of HTML -->


<!-- START of CSS -->

<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css"/>

<style>

.hat-builder-container {
  max-width: 100%;
  height: 350px;
  background-color: #DAD3C8;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 40px;
  z-index: 500;
  overflow: hidden;
}

/* Get Started Button */
.button-container {
  position: absolute;
  margin-top: -123px;
  width: 100%;
  height: 300px;
  font-size: 28px;
  display: flex;
  color: #EBE3D8;
  background: #332E21;
  align-items: start;
  justify-content: center;
  border-radius: 40px;
  border: 0px;
  animation: bounce 1s infinite;
  z-index: 250;
}
button.get-started {
  position: absolute;
  width: 100%;
  height: 105px;
  font-size: 28px;
  display: block;
  color: #EBE3D8;
  background: transparent;
  align-items: center;
  justify-content: center;
  border-radius: 40px;
  border: 0px;
  animation: bounce 1s infinite;
  z-index: 250;
}
.button-image {
  position: relative;
  top: 20px;
  width: 50px;
}
.button-text {
  margin-top: 10px;
  position: relative;
  font-weight: bold;
  font-family: var(--font-body-family);
  text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3); 
}
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

/* Hat Builder Header */
.hat-builder-header {
  position: absolute;
  display: flex;
  top: 20px;
  left: 30px;
  right: 30px;
  justify-content: space-between;
  align-items: center;  
}
.hat-builder-left-heading {
  text-align: left;
  font-size: 24px;
  font-weight: bold;
  color: #332E21;
}
.hat-builder-right-heading {
  display: flex;
  align-items: center;
}
.hat-builder-collection-icon {
  margin-right: 5px;
  width: 20px;
  height: 20px;
}
.hat-builder-collection-label {
  font-size: 16px;
  color: #332E21;
}

/* Default Patch Carousel */  
.default-patch-carousel {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  width: 100%;
  max-height: 300px;
  opacity: 1;
}
.default-patch-carousel img {
  max-width: 12rem;
  max-height: 12rem;
  display: block;
  margin: 0 auto;
}
/* Styling for the slick-slide to add more space between the patches */
.default-patch-carousel .slick-slide {
  margin: 0 50px; 
}

/* Default Hat Carousel */
.default-hat-carousel {
  position: absolute;
  top: 54%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1;
  width: 100%;
  max-height: 300px;
  opacity: 1;  
}
.default-hat-carousel img {
  max-width: 21rem;
  max-height: 21rem;
  display: block;
  margin: 0 auto;
}
/* Styling for the slick-slide to add more space between the hats */  
.default-hat-carousel .slick-slide {
  margin: 0 50px;
}

/* Play Pause Icon */
#playPauseIcon {
  position: absolute;
  bottom: 0px;
  right: 15px;
  cursor: pointer;
  width: 40px;
  height: 40px;
  z-index: 500;
}

/* Toggle Section */  
.toggle-section {
  display: flex;
  position: relative;
  width: 100%
  height: 55px;
  margin-top: 10px;
  padding-left: 16px;
  padding-right: 16px;
  z-index: 0;
}

/* Toggle Container */
.toggle-container {
  display: flex;
  position: relative;
  width: 100%;
  height: 55px;
  background: #C9C2B8;
  border-radius: 50px;
  border: solid #928D86 1.5px;
  justify-content: center;
  align-items: center;
  padding: 3px;
}

/* New background for active state */
.active-background {
  display: flex;
  position: absolute;
  left: 1%;
  width: 50%;
  height: 86%; 
  background-color: #EBE3D8;
  border: solid #928D86 1.5px;
  border-radius: 50px;
  transition: left 0.3s ease;
}

/* Adjust based on active toggle */
#hatsToggle.active ~ .active-background {
  left: 50%;
}

/* Patch & Hat Toggle Buttons */
.toggle-button {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  cursor: pointer;
  background: transparent;
  color: #332E21;
  position: relative;
  z-index: 2;  
}

.toggle-button.active {
  color: #332E21;
}


.highlight-box {
  position: absolute;
  height: calc(100% - 4px);
  border: solid #E74C3C 1.75px;
  border-radius: 22px;
  overflow: visible;
  opacity: 75%;
  right: 50%;
  transform: translateX(50%); 
}

#patchHighlight {
  width: 120px;
}

#hatHighlight {
  width: 206px;  
}

.patch-carousel-container, 
.hat-carousel-container {
  position: relative;
  justify-content: center;
  align-items: center;
  overflow: visible;
}

.patch-carousel-container {
  width: 100%;
  height: 120px;
  top: 45px;
  z-index: 1;
}

.hat-carousel-container {
  width: 100%;
  height: 206px;
  top: -110px;
  z-index: 0;
}

.hat-builder-carousel-container {
  display: block;
  position: relative;
  width: 100%;
  height: 206px;
  justify-content: center;
  align-items: center;
  overflow: visible;
}

</style>

<!-- END of CSS -->


<!-- START of JavaScript -->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js"></script>

<script>

$(document).ready(function(){

  // Initialize carousels
  function initializeCarousels() {
    // Patch Carousel
    $('.default-patch-carousel').slick({
      infinite: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      autoplay: true,
      autoplaySpeed: 2000,
      centerMode: true,
      arrows: false,
      adaptiveHeight: false,
      variableWidth: true
    });

    // Hat Carousel
    $('.default-hat-carousel').slick({
      infinite: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      autoplay: false,
      autoplaySpeed: 2000,
      centerMode: true,
      arrows: false,
      adaptiveHeight: false,
      variableWidth: true
    }).slick('slickPause');
  }

  initializeCarousels();

  // SVG content for play and pause
  const playSVG = `<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M13.875 10.65a.75.75 0 0 0 0-1.3l-5.25-3.03a.75.75 0 0 0-1.125.649v6.062a.75.75 0 0 0 1.125.65l5.25-3.032Zm-4.875 1.082v-3.464l3 1.732-3 1.732Z" fill="#332E21"/><path fill-rule="evenodd" d="M10 3a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm-5.5 7a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0Z" fill="#332E21"/></svg>`;

  const pauseSVG = `<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 7.25a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z" fill="#332E21"/><path d="M12.75 8a.75.75 0 0 0-1.5 0v4a.75.75 0 0 0 1.5 0v-4Z" fill="#332E21"/><path fill-rule="evenodd" d="M10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Z" fill="#332E21"/></svg>`;

  // Play/Pause functionality
  $('#playPauseIcon').on('click', function() {
    if ($(this).attr('data-state') === 'playing') {
      $('.default-patch-carousel, .default-hat-carousel').slick('slickPause');
      $(this).attr('data-state', 'paused');
      $(this).html(playSVG);
    } else {
      if ($('#patchesToggle').hasClass('active')) {
        $('.default-patch-carousel').slick('slickPlay');
      } else {
        $('.default-hat-carousel').slick('slickPlay');
      }
      $(this).attr('data-state', 'playing');
      $(this).html(pauseSVG);
    }
  });

// Toggle carousel playback
function toggleCarouselPlayback() {
  const isPatchesActive = $('#patchesToggle').hasClass('active');
  if (isPatchesActive) {
    $('.default-patch-carousel').slick('slickPlay');
    $('.default-hat-carousel').slick('slickPause');
    $('#shopify-section-template--14833441800262__81fbde0d-26af-45a0-bc7b-b0514d8bd082 .collection-list').show();
    $('#shopify-section-template--14833441800262__e617045b-0ee9-4ffa-a5a4-a21a2ccd0cf6 .collection-list').hide();
  } else {
    $('.default-hat-carousel').slick('slickPlay');
    $('.default-patch-carousel').slick('slickPause');
    $('#shopify-section-template--14833441800262__81fbde0d-26af-45a0-bc7b-b0514d8bd082 .collection-list').hide();
    $('#shopify-section-template--14833441800262__e617045b-0ee9-4ffa-a5a4-a21a2ccd0cf6 .collection-list').show();
  }
}

// Update header label text  
function updateHatBuilderHeader() {
  const isPatchesActive = $('#patchesToggle').hasClass('active');
  const label = isPatchesActive ? "All Patches" : "All Hats";
  $('.hat-builder-collection-label').text(label);
}

// Toggle click event
$('#patchesToggle, #hatsToggle').on('click', function() {
  if ($(this).hasClass('active')) return;
  
  $('.toggle-button').removeClass('active');
  $(this).addClass('active');
  
  toggleCarouselPlayback();
  updateHatBuilderHeader();

  if($('#hatsToggle').hasClass('active')) {
    $('.active-background').css('left', '49%');
  } else {
    $('.active-background').css('left', '1%');
  }

  if ($('#patchesToggle').hasClass('active')) {
    $('#patchHighlight').show();
    $('#hatHighlight').hide();
  } else {
    $('#hatHighlight').show();
    $('#patchHighlight').hide();
  } 
});

// Ensure correct initial category visibility  
function setInitialCategoryDisplay() {
  if ($('#patchesToggle').hasClass('active')) {
    $('#shopify-section-template--14833441800262__81fbde0d-26af-45a0-bc7b-b0514d8bd082 .collection-list').show();
    $('#shopify-section-template--14833441800262__e617045b-0ee9-4ffa-a5a4-a21a2ccd0cf6 .collection-list').hide();
  } else {
    $('#shopify-section-template--14833441800262__81fbde0d-26af-45a0-bc7b-b0514d8bd082 .collection-list').hide();
    $('#shopify-section-template--14833441800262__e617045b-0ee9-4ffa-a5a4-a21a2ccd0cf6 .collection-list').show();
  }
}

setInitialCategoryDisplay();

// Scroll on button click
$('#scrollButton').on('click', function() {
  const targetScroll = $(".hat-builder-container").offset().top;
  $('html, body').animate({
    scrollTop: targetScroll
  }, 1000);
});

});
</script>